# JavaScript Learning Notes

Author: Zher Leon

Last Update: Aug 29, 2021

---

### â³ ç±» - Class

- å£°æ˜

  ä½¿ç”¨å¸¦æœ‰classå…³é”®å­—çš„ç±»åè¿›è¡Œå£°æ˜ã€‚

``` 
class Cat() {
	constructor(name,color) {
		this.name = name;
		this.color = color;
	}
}
```

- æå‡

  ç±»å£°æ˜ä¸å‡½æ•°å£°æ˜ä¸ä¸€æ ·ï¼Œå‡½æ•°å£°æ˜ä¼šæå‡ï¼Œè€Œç±»è¯´æ˜ä¸ä¼šã€‚æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦å…ˆå£°æ˜ç±»ç„¶åå†è®¿é—®å®ƒï¼Œå¦åˆ™å°†ä¼šæŠ›å‡ºReferenceErrorçš„é”™è¯¯å–”ã€‚
``` 
é”™è¯¯ä½¿ç”¨ï¼š
let meow = new Cat();
class Cat {}

æ­£ç¡®ä½¿ç”¨ï¼š
class Cat {}
let meow = new Cat();
```

  ï¼ˆæå‡-Hoistingï¼šå¯ä»¥ç†è§£ä¸ºï¼Œå˜é‡å’Œå‡½æ•°çš„å£°æ˜åœ¨ç‰©ç†å±‚é¢ä¸Šç§»åŠ¨åˆ°ä»£ç çš„æœ€å‰é¢ï¼Œè™½ç„¶å®é™…ä¸Šå˜é‡å’Œå‡½æ•°å£°æ˜åœ¨ä»£ç ä¸­æ˜¯ä¸ä¼šåŠ¨çš„ï¼Œè€Œæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¢«æ”¾å…¥å†…å­˜ä¸­ã€‚ï¼‰

- ç±»è¡¨è¾¾å¼

  ç±»è¡¨è¾¾å¼æ—¶å®šä¹‰ç±»çš„å¦ä¸€ç§æ–¹æ³•ã€‚ç±»è¡¨è¾¾å¼å¯ä»¥å‘½åæˆ–ä¸å‘½åã€‚è¡¨è¾¾å¼çš„åç§°æ˜¯è¯¥ç±»çš„å±€éƒ¨åç§°ã€‚
```
let cat = class {
	constructor(name,color) {
		this.name = name;
		this.color = color;
	}
}
console.log(cat.name) ==>> cat

let cat = class catEmulator {
	constructor(name,color) {
		this.name = name;
		this.color = color;
	}
}
console.log(cat.name) ===> catEmulator

```

- ç±»ä½“å’Œæ–¹æ³•å®šä¹‰

  ä¸€ä¸ªç±»çš„ç±»ä½“æ˜¯æŒ‡èŠ±æ‹¬å·ä¸­çš„éƒ¨åˆ†ï¼Œé‡Œé¢å¯ä»¥å®šä¹‰æ–¹æ³•å’Œæ„é€ å‡½æ•°ã€‚

`æ„é€ å‡½æ•°`

â€‹	constructorç”¨äºåˆ›å»ºå’Œåˆå§‹åŒ–ä¸€ä¸ªç”±classåˆ›å»ºçš„å¯¹è±¡ã€‚ä¸€ä¸ªç±»åªèƒ½æ‹¥æœ‰ä¸€ä¸ªconstructorã€‚å¦‚æœå¤šä¸ªï¼Œåˆ™ä¼šæŠ›å‡ºSyntaxErrorã€‚

â€‹	ä¸€ä¸ªæ„é€ å‡½æ•°å¯ä»¥ä½¿ç”¨superå…³é”®å­—æ¥è°ƒç”¨ä¸€ä¸ªçˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚

`åŸå‹æ–¹æ³•`
```
class Cat {
	// constructor
	constructor(name, color) {
		this.name = name;
		this.color = color;
	}
	// Getter
	get catInfo() {
		return this.getPetcat();
	}
	// Method
	getPetCat() {
		return `ä»å‰æœ‰ä¸€åªå«${name}çš„å°çŒ«å’ªï¼Œå®ƒæœ‰ä¸€èº«${color}çš„æ¯›å‘`
	}
}
const meow = new Cat(â€˜æ—ºè´¢â€™,'é‡‘è‰²');

console.log(meow.catInfo());
// ä»å‰æœ‰ä¸€åªå«æ—ºè´¢çš„å°çŒ«å’ªï¼Œå®ƒæœ‰ä¸€èº«é‡‘è‰²çš„æ¯›å‘
```

`é™æ€æ–¹æ³•`

â€‹	staticå…³é”®å­—ç”¨äºå®šä¹‰ä¸€ä¸ªç±»çš„é™æ€æ–¹æ³•ï¼Œè°ƒç”¨é™æ€æ–¹æ³•ä¸éœ€è¦å®ä¾‹åŒ–è¯¥ç±»ï¼Œä½†ä¸èƒ½é€šè¿‡ä¸€ä¸ªç±»å®ä¾‹è°ƒç”¨é™æ€æ–¹æ³•ï¼Œé€šå¸¸ç”¨äºä¸€ä¸ªåº”ç”¨ç¨‹åºåˆ›å»ºå·¥å…·å‡½æ•°ã€‚

```
class Cat {
	// constructor
	constructor(name, color) {
		this.name = name;
		this.color = color;
	}
	static displayName = 'A story about a cat.';
	static catInfo(name,color) {
		return `ä»å‰æœ‰ä¸€åªå«${name}çš„å°çŒ«å’ªï¼Œå®ƒæœ‰ä¸€èº«${color}çš„æ¯›å‘`
	}
}
// ä¸èƒ½é€šè¿‡ä¸€ä¸ªç±»çš„å®ä¾‹è°ƒç”¨
const meow = new Cat('æ—ºè´¢','é‡‘è‰²')
const discrption = meow.displayName; // undefined
const info = meow.catInfo(); // undefined
// ä½†æ˜¯å¯ä»¥é€šè¿‡è¯¥ç±»å»è°ƒç”¨
console.log(Cat.diaplayName); // A story about a cat.
console.log(Cat.catInfo('æ—ºè´¢',â€™é‡‘è‰²â€˜));  // ä»å‰æœ‰ä¸€åªå«æ—ºè´¢çš„å°çŒ«å’ªï¼Œå®ƒæœ‰ä¸€èº«é‡‘è‰²çš„æ¯›å‘
```

### â³ Array filter()

â€‹	filter()ç”¨äºå¯¹**æ•°ç»„**è¿›è¡Œè¿‡æ»¤ã€‚å®ƒçš„ç»“æœä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæ–°æ•°ç»„ä¸­çš„å…ƒç´ æ—¶é€šè¿‡æ£€æŸ¥çš„æŒ‡å®šæ•°ç»„ä¸­ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰å…ƒç´ ã€‚

â€‹	æ¯”å¦‚è¯´ï¼š

![Array Filter](JavaScript-LearningNotes.assets/image-20210830160255503.png)

â€‹	æ³¨æ„ï¼šè¿‡æ»¤ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œåˆ›å»ºæ–°æ•°ç»„è¿›è¡Œå­˜å‚¨ï¼Œä¸ä¼šæ”¹å˜åŸæœ¬çš„æ•°ç»„ã€‚

### â³ Symbol

â€‹	ES6å¼•å…¥çš„ä¸€ä¸ªæ–°çš„æ•°æ®ç±»å‹ã€‚å¯ä»¥åœ¨å…¨å±€ç”Ÿæˆå”¯ä¸€çš„ä¸€ä¸ªæ ‡è¯†å€¼ã€‚

### â³ æ“ä½œç¬¦

â€‹	æœ€å¸¸ç”¨çš„æ“ä½œç¬¦æœ‰ï¼š=ã€-ã€*ã€/ã€%ã€+=ã€-= ç­‰ç­‰ã€‚ä¸‹é¢è®°å½•ä¸€ä¸‹æˆ‘ä¸ç†Ÿæ‚‰çš„ä¸€äº›ã€‚

#### 		ğŸ”— å¯é€‰é“¾æ“ä½œç¬¦ï¼ˆ?.ï¼‰

â€‹	å…è®¸è¯»å–ä½äºè¿æ¥å¯¹è±¡é“¾æ·±å¤„çš„å±æ€§çš„å€¼ï¼Œè€Œä¸å¿…æ˜ç¡®éªŒè¯é“¾ä¸­çš„æ¯ä¸ªå¼•ç”¨æ˜¯å¦æœ‰æ•ˆã€‚?.å’Œ.ä¸åŒä¹‹å¤„åœ¨äºå½“å¼•ç”¨æ˜¯ç©º (null æˆ–è€… undefined)çš„æƒ…å†µä¸‹ä¸ä¼šå¼•èµ·æŠ¥é”™ï¼Œå¦‚æœæ˜¯ç©ºçš„ï¼Œè¿™ä¸ªè¡¨è¾¾å¼çš„çŸ­è·¯è¿”å›å€¼æ˜¯`undefined`

```
const myInfo = {
	name: 'Tom',
	cat: {
		name: 'milk'
	}
}
const dogName = myInfo.dog.name; 
//Reset Error: Cannot read properties of undefined (reading 'name')
const mydog = myInfo.dog?.name;
// undefined
```

â€‹	âš  ä¸è¦å»å°è¯•å¯¹æ‰€æœ‰äº‹ç‰©è¿›è¡Œå¯é€‰é“¾æ¥ã€‚è™½ç„¶å¯é€‰é“¾å¾ˆå¥½ç”¨ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰åœ¨ ECMA ä¸‹çš„ä¸œè¥¿éƒ½å¯ä»¥é€‰æ‹©é“¾æ¥åœ¨ä¸€èµ·ã€‚åŸºæœ¬ä¸Šï¼Œåªéœ€è®°ä½ 3 ç§å—æ”¯æŒçš„æ“ä½œï¼šå±æ€§è®¿é—®å™¨ï¼Œæ•°ç»„å’Œå‡½æ•°è°ƒç”¨ã€‚

ä¸‹é¢æ˜¯ä¸æ”¯æŒçš„æ“ä½œåˆ—è¡¨ï¼š

```
// Delete
delete a.?b   // ReferenceError: Can't find variable: a

// Constructor
new a?.()     // SyntaxError: Cannot call constructor in an optional chain.

// Template literals
a?.`string`   // SyntaxError: Cannot use tagged templates in an optional chain.

// Property assignment
a?.b = c      // SyntaxError: Left side of assignment is not a reference.

// Imports, Exports, Super, etc. etc.
```

#### 	ğŸ”— ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ (??)

â€‹	**ç©ºå€¼åˆå¹¶æ“ä½œç¬¦**ï¼ˆ**`??`**ï¼‰æ˜¯ä¸€ä¸ªé€»è¾‘æ“ä½œç¬¦ï¼Œå½“å·¦ä¾§çš„æ“ä½œæ•°ä¸º `null` æˆ–è€… `undefined`æ—¶ï¼Œè¿”å›å…¶å³ä¾§æ“ä½œæ•°ï¼Œå¦åˆ™è¿”å›å·¦ä¾§æ“ä½œæ•°ã€‚

```
const mycat = null ?? 'hello'
// 'hello'
const mycat = 0 ?? 'hello'
// 0
å¦‚æœmycatæ˜¯nullæˆ–è€…undefinedå°±è¿”å›å³è¾¹çš„å€¼ï¼Œå¦‚æœä¸æ˜¯å°±è¿”å›å·¦è¾¹çš„å€¼ã€‚
```

â€‹	âš éœ€è¦æ³¨æ„ï¼Œä¸è¦å’Œ&&æˆ–è€…||ç›´æ¥è¿æ¥ä½¿ç”¨ï¼Œå› ä¸º??å’Œå®ƒä»¬çš„è¿ç®—ä¼˜å…ˆçº§æˆ–è€…è¯´æ˜¯è¿ç®—é¡ºåºè¿˜æ²¡æœ‰è¢«å®šä¹‰ã€‚

```
null || undefined ?? "foo"  //æŠ›å‡ºSyntaxError
true || undefined ?? "foo"  //æŠ›å‡ºSyntaxError

// ä½†æ˜¯åŠ ä¸Šæ‹¬å·æ¥æ˜¾å¼è¡¨æ˜è¿ç®—ä¼˜å…ˆçº§ï¼Œæ˜¯æ²¡æœ‰é—®é¢˜çš„.
(null || undefined) ?? "foo" //è¿”å›â€œfoo"
```

#### 	ğŸ”— é€»è¾‘ç©ºèµ‹å€¼(??=)

â€‹	é€»è¾‘ç©ºèµ‹å€¼è¿ç®—ç¬¦ (`x ??= y`) ä»…åœ¨ `x` æ˜¯ nullish (`null` æˆ– `undefined`) æ—¶å¯¹å…¶èµ‹å€¼ã€‚

```
function config(options) {
	options.duration ??= 100;
	options.speed ??= 25;
	return options;
}

config({duration: 125}); 
//output: { duration: 125, speed: 25 }
config({});
//output: { duration: 100, speed: 25 }

ç¬¬ä¸€ä¸ªä¼ å…¥äº†duration, æ‰€ä»¥ä¸éœ€è¦èµ‹å€¼ï¼Œä½†æ˜¯æ²¡æœ‰ä¼ å…¥speedï¼Œåˆ™speedä¸ºç©ºï¼Œæ‰€ä»¥è¿”å›speedä¸º25ï¼Œç¬¬äºŒä¸ªåŒæ ·é“ç†ï¼Œéƒ½æ²¡ä¼ ï¼Œæ‰€ä»¥è¿”å›äº†é»˜è®¤å€¼ã€‚
```

#### 	ğŸ”— delete æ“ä½œç¬¦

â€‹	ç”¨äºåˆ é™¤å¯¹è±¡çš„æŸä¸ªå±æ€§ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å‘è¿™ä¸ªå±æ€§çš„å¼•ç”¨ï¼Œé‚£å®ƒå°±ä¼šè¢«é‡Šæ”¾ã€‚

```
const Employee = {
  firstname: 'John',
  lastname: 'Doe'
};

console.log(Employee.firstname);
// expected output: "John"

delete Employee.firstname;

console.log(Employee.firstname);
// expected output: undefined
```



### â³ GC-åƒåœ¾å›æ”¶æœºåˆ¶

â€‹	GC(Garbage Collection)ï¼Œä¸­æ–‡ç§°ä¸ºåƒåœ¾å›æ”¶æœºåˆ¶ã€‚åœ¨ç¨‹åºä¸­ï¼ŒGCçš„ä½œç”¨æ˜¯å›æ”¶ä¸å†ä½¿ç”¨çš„å†…å­˜ç©ºé—´ã€‚å¯¹äºCè¯­è¨€è¿™ç§é«˜çº§è¯­è¨€ï¼Œæä¾›äº†malloc()æˆ–è€…free()è¿™æ ·çš„APIè¦æ±‚ç¨‹åºå‘˜æ˜¾ç¤ºçš„åˆ†é…æˆ–è€…é‡Šæ”¾å†…å­˜ï¼Œè¿™ç§å°±æ˜¯è¦æ‰‹åŠ¨å®ç°å†…å­˜ç®¡ç†ï¼Œå¦‚æœä¸å°å¿ƒé‡Šæ”¾äº†æ­£åœ¨ä½¿ç”¨ä¸­çš„å†…å­˜å°±ä¼šå‡ºBUGã€‚

â€‹	**ç„¶è€ŒJavaScriptæ˜¯ä¸€é—¨å®½å®¹çš„è¯­è¨€ã€‚**JavaScriptçš„å®ç°å·²ç»æ­è½½å¥½äº†GCã€‚é€šè¿‡GCï¼Œå‰ç«¯æŠŠå†…å­˜ç®¡ç†äº¤ç»™è®¡ç®—æœºï¼Œä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ã€‚è™½ç„¶æ˜¯è¿™æ ·ï¼Œä½†ä¹Ÿä¸èƒ½å¿½ç•¥å†…å­˜ç®¡ç†ï¼Œå¦åˆ™åŒæ ·ä¼šå¼•èµ·å†…å­˜çš„æ³„éœ²ï¼Œå¼•èµ·äº¤äº’æ€§ã€‚

å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/szengtal/article/details/99488127



### â³ äº«å…ƒæ¨¡å¼

â€‹	äº«å…ƒ(Flyweight)æ¨¡å¼ï¼Œç”¨äºæ€§èƒ½ä¼˜åŒ–ã€‚

â€‹	å‡è®¾æœ‰ä¸ªå†…è¡£å·¥å‚ï¼Œç›®å‰çš„äº§å“æœ‰50ç§ç”·å¼å†…è¡£å’Œ50ç§å¥³å£«å†…è¡£ï¼Œä¸ºäº†æ¨é”€äº§å“ï¼Œå·¥å‚å†³å®šç”Ÿäº§ä¸€äº›å¡‘æ–™æ¨¡ç‰¹æ¥ç©¿ä¸Šä»–ä»¬çš„å†…è¡£æ‹æˆå¹¿å‘Šç…§ç‰‡ã€‚æ­£å¸¸æƒ…å†µä¸‹éœ€è¦50ä¸ªç”·æ¨¡ç‰¹å’Œ50ä¸ªå¥³æ¨¡ç‰¹ï¼Œç„¶åè®©ä»–ä»¬æ¯äººåˆ†åˆ«ç©¿ä¸Šä¸€ä»¶å†…è¡£æ¥æ‹ç…§ã€‚ä¸ä½¿ç”¨äº«å…ƒæ¨¡å¼çš„æƒ…å†µä¸‹ï¼Œåœ¨ç¨‹åºé‡Œä¹Ÿè®¸ä¼šè¿™æ ·å†™ï¼š

```
var Model = function(sex, underwear) {
	this.sex = sex;
	this.underwear = underwear;
}
Model.prototype.takePhoto = function() {
	console.log(`sex=${this.sex}, underwear=${this.underwear}`);
}
for (var i = 1; i<=50; i++) {
	var maleModel = new Model('male', 'No.'+i);
	maleModel.takePhoto();
}
for (var i = 1; i<=50; i++) {
	var femaleModel = new Model('female', 'No.'+i);
	femaleModel.takePhoto();
}
```

â€‹	æ‹ä¸€å¼ ç…§ç‰‡æ¯æ¬¡éƒ½è¦ä¼ å…¥sexå’Œunderwearå‚æ•°ï¼Œå¦‚æœå„æœ‰50ç§å†…è¡£ï¼Œå°±éœ€è¦äº§ç”Ÿä¸€ç™¾ä¸ªå¯¹è±¡ï¼Œå¦‚æœå°†æ¥ç”Ÿäº§10000ç§ï¼Œé‚£ä¹ˆç¨‹åºå¯èƒ½ä¼šå› ä¸ºå­˜å‚¨è¿‡å¤šçš„å¯¹è±¡è€Œæå‰å´©æºƒã€‚

â€‹	ä¸ºäº†ä¼˜åŒ–è¿™ä¸ªåœºæ™¯ï¼Œæ¢ä¸ªè§’åº¦æƒ³ï¼Œè™½ç„¶æœ‰ä¸€ç™¾ç§å†…è¡£ï¼Œä½†æ˜¯å¾ˆæ˜¾ç„¶ä¸éœ€è¦ç”·å¥³å„äº”åä¸ªæ¨¡ç‰¹ï¼Œåªéœ€è¦ä¸€ä¸ªç”·æ¨¡ç‰¹å’Œä¸€ä¸ªå¥³æ¨¡ç‰¹ï¼Œè®©ä»–ä»¬åˆ†åˆ«ç©¿ä¸Šä¸åŒçš„å†…è¡£æ‹ç…§å³å¯ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥è¿™ä¹ˆå†™ï¼š

```
var Model = function(sex) {
	this.sex = sex;
}
Model.prototype.takePhoto = function() {
	console.log(`sex=${this.sex}, underwear=${this.underwear}`);
}
var maleModel = new Model('male')
var femaleModel = new Model('female')
for( var i =1; i<=50; i++) {
	maleModel.underwear = 'underwear' + i;
	maleModel.takePhoto();
}
for( var j=1; j<=50; j++) {
	femaleModel.underwear = 'underwear' + j;
	femaleModel.takePhoto();
}
```

â€‹		è¿™ä¸¤æ®µä¹ä¸€çœ‹å°±æ˜¯å°†åˆ›å»ºå¯¹è±¡è¿™ä¸ªæ­¥éª¤ä»å†…éƒ¨å˜é‡æå–æˆå¤–éƒ¨å˜é‡ã€‚äº«å…ƒæ¨¡å¼çš„ç›®æ ‡å°±æ˜¯å°½é‡å‡å°‘å…±äº«å¯¹è±¡çš„æ•°é‡ã€‚

â€‹	å¯¹äºå¦‚ä½•åˆ’åˆ†å†…éƒ¨å’Œå¤–éƒ¨çŠ¶æ€ï¼Œå¯ä»¥æ ¹æ®ä¸‹é¢å‡ æ¡ï¼š

	- å†…éƒ¨çŠ¶æ€å­˜å‚¨äºå¯¹è±¡å†…éƒ¨
	- å†…éƒ¨çŠ¶æ€å¯ä»¥è¢«ä¸€äº›å¯¹è±¡å…±äº«
	- å†…éƒ¨çŠ¶æ€ç‹¬ç«‹äºå…·ä½“çš„åœºæ™¯ï¼Œé€šå¸¸ä¸ä¼šæ”¹å˜
	- å¤–éƒ¨çŠ¶æ€å–å†³äºå…·ä½“çš„åœºæ™¯ï¼Œå¹¶æ ¹æ®åœºæ™¯è€Œå˜åŒ–ï¼Œå¤–éƒ¨çŠ¶æ€ä¸èƒ½è¢«å…±äº«

### â³ Babel

â€‹	Babel[ËˆbeÉªbl]ï¼Œæ˜¯ä¸€ä¸ªç”¨äºç¼–å†™ä¸‹ä¸€ä»£JavaScriptçš„ç¼–è¯‘å™¨ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨äº†JavaScriptæœ€æ–°ç‰ˆæœ¬çš„è¯­æ³•æ—¶ï¼ŒBabelå¯ä»¥å°†æ–°è¯­æ³•è½¬åŒ–ä¸ºES5ï¼Œè®©ä½ç«¯ç¯å¢ƒè¿è¡Œï¼ˆå› ä¸ºES5è§„èŒƒè¦†ç›–äº†ç»å¤§éƒ¨åˆ†çš„æµè§ˆå™¨ï¼Œæ‰€ä»¥è½¬æ¢åˆ°ES5æ˜¯ä¸ªå®‰å…¨ä¸”æµè¡Œçš„åšæ³•å•¦ã€‚ï¼‰



### â³ Setå¯¹è±¡

â€‹	Setå¯¹è±¡æ˜¯å”¯ä¸€å€¼çš„é›†åˆï¼Œæ¯ä¸ªå€¼åœ¨Setä¸­åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ä¸€ä¸ªSetå¯ä»¥å®¹çº³ä»»ä½•æ•°æ®ç±»å‹çš„ä»»ä½•å€¼ã€‚

```
// åˆå¹¶æ•°æ®
const a = [1,2,3]
const b = [1,4,5]
const obj1 = { a: 1}
const obj2 = { b: 1}

// ä¸åˆç†çš„å†™æ³•
const c =  a.concat(b); //[1,2,3,1,4,5]
const obj = Object.assign({}, obj1, obj2) // {a:1, b:1}

// æ”¹è¿›
const c = [...new Set([...a,...b])]; //[1,2,3,4,5]
const obj = {...obj1, ...obj2}; //{a:1, b:1}

```



### â³ å…³äº${}

â€‹		åœ¨`${}`ä¸­å¯ä»¥æ”¾å…¥ä»»æ„çš„JavaScriptè¡¨è¾¾å¼ï¼Œå¯ä»¥è¿›è¡Œè¿ç®—ï¼Œä»¥åŠå¼•ç”¨å¯¹è±¡å±æ€§ã€‚

```
const name = 'Tom'
const score = 59
let result = ''
if(score > 60) {
	result = `${name}çš„è€ƒè¯•æˆç»©åŠæ ¼`
}else {
	result = `${name}çš„è€ƒè¯•æˆç»©ä¸åŠæ ¼`
}

å…¶å®å¯ä»¥è¿™ä¹ˆå†™:
const result = `${name}${score > 60 ? 'çš„è€ƒè¯•æˆç»©åŠæ ¼':'çš„è€ƒè¯•æˆç»©ä¸åŠæ ¼'}`
```

å…³äºä¸€äº›å†™æ³•çš„æ”¹è¿›å¯ä»¥ç»§ç»­æŸ¥çœ‹ï¼š [ä½ ä¼šç”¨ES6ï¼Œé‚£å€’æ˜¯ç”¨å•Šï¼](https://juejin.cn/post/7016520448204603423)



### â³ å…³äºES5ã€ES6å’ŒES2015

â€‹	ES2015ç‰¹æŒ‡åœ¨2015å¹´å‘å¸ƒçš„æ–°ä¸€ä»£JSè¯­è¨€æ ‡å‡†ï¼ŒES6æ³›æŒ‡ä¸‹ä¸€ä»£JSè¯­è¨€æ ‡å‡†ï¼ŒåŒ…æ‹¬ES2015ã€ES2016ã€ES2017ã€ES2018ç­‰ã€‚ç°é˜¶æ®µç»å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼ŒES2015é»˜è®¤ç­‰åŒäºES6ã€‚ES5æ³›æŒ‡ä¸Šä¸€ä»£è¯­è¨€æ ‡å‡†ï¼ŒES2015å¯ä»¥ç†è§£ä¸ºES5å’ŒES6çš„æ—¶é—´åˆ†ç•Œçº¿ã€‚



### â³ å…³äºthisçš„æŒ‡å‘é—®é¢˜

â€‹	å½“å‡½æ•°åœ¨è°ƒç”¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡åŒ…æ‹¬å‡½æ•°è°ƒç”¨çš„ä¸€äº›ä¿¡æ¯ï¼ˆè°ƒç”¨æ ˆã€ä¼ å…¥å‚æ•°ã€è°ƒç”¨æ–¹å¼ï¼‰ï¼Œthiså°±æ˜¯æŒ‡å‘è¿™ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚

> æ³¨æ„ï¼š thisä¸æ˜¯é™æ€çš„ï¼Œä¹Ÿä¸æ˜¯ç¼–å†™æ—¶ç»‘å®šçš„ï¼Œæ˜¯åœ¨ **è¿è¡Œæ—¶**ç»‘å®šçš„ï¼Œå®ƒçš„ç»‘å®šå’Œå‡½æ•°å£°æ˜çš„ä½ç½®æ²¡æœ‰å…³ç³»ï¼Œä»…ä»…å–å†³äºå‡½æ•°è°ƒç”¨çš„æ–¹å¼ã€‚

#### 	ğŸ”— this æŒ‡å‘

â€‹		åœ¨jsä¸­ï¼Œthisçš„ç»‘å®šè§„åˆ™ä¸€å…±æœ‰5ç§ï¼š

1. é»˜è®¤ç»‘å®š
2. éšå¼ç»‘å®š
3. æ˜¾å¼ç»‘å®šï¼ˆç¡¬ç»‘å®šï¼‰
4. new ç»‘å®š
5. ES6ç®­å¤´ç»‘å®š

- é»˜è®¤ç»‘å®š

  æŒ‡å‡½æ•°ç‹¬ç«‹è°ƒç”¨ï¼Œä¸æ¶‰åŠå…¶ä»–ç»‘å®šè§„åˆ™ã€‚åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ`this`æŒ‡å‘windowï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ `this`æŒ‡å‘undefined

  >  éä¸¥æ ¼æ¨¡å¼

  ```javascript
  var foo = 123
  function print() {
  	this.foo = 234
  	console.log(this) //window
  	console.log(foo) //234
  }
  print()
  ```

  éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œprint()æ˜¯é»˜è®¤ç»‘å®šï¼Œ`this`æŒ‡å‘windowï¼Œæ‰€ä»¥æ‰“å°windowå’Œ234ã€‚è‡³äºè¿™ä¸ªfooï¼Œåœ¨é¢„ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œfooå’Œprintå‡½æ•°ä¼šå­˜æ”¾åœ¨å…¨å±€`GO`ä¸­(å³windowå¯¹è±¡ä¸Š)ï¼Œæ‰€ä»¥ä¸Šé¢çš„fooç›¸å½“äºwindow.fooã€‚

  > ä¸¥æ ¼æ¨¡å¼

  ```javascript
  "use strict" //å¼€å¯ä¸¥æ ¼æ¨¡å¼
  var foo = 123
  function print() {
  	console.log('print this is',this)  //undefined
  	console.log(window.foo) // 123 
  	console.log(this.foo)  // æŠ¥é”™ï¼šUncaught TypeError: Cannot read property 'foo' of undefined
  }
  console.log('global this is', this)  // window
  print()
  ```

  å¼€å¯ä¸¥æ ¼æ¨¡å¼åï¼Œå‡½æ•°å†…éƒ¨çš„`this`ä¼šæŒ‡å‘undefinedï¼Œä½†å…¨å±€å¯¹è±¡windowä¸ä¼šå—å½±å“ã€‚

  > ä½¿ç”¨let/const

  ```javascript
  let a = 1
  const b = 2
  var c = 3
  function print() {
  	console.log(this.a)  // undefined
  	console.log(this.b)  // undefined
  	console.log(this.c)  // 3
  }
  print()
  console.log(this.a) // undefined
  ```

  letå’Œconstå®šä¹‰çš„å˜é‡å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œè€Œä¸”ä¸ä¼šæŒ‚åœ¨åˆ°windowä¸Šï¼Œæ‰€ä»¥æ•ˆæœå¦‚ä¸Šã€‚

  > åœ¨å¯¹è±¡å†…æ‰§è¡Œ

  ```
  a = 1
  function foo() {
  	console.log(this.a)
  }
  const obj = {
  	a: 10
  	bar() {
  		foo()  //1
  	}
  }
  obj.bar();
  ```

  fooè™½ç„¶åœ¨objçš„barå‡½æ•°ä¸­ï¼Œä½†æ˜¯fooçš„å‡½æ•°ä»ç„¶æ—¶ç‹¬ç«‹è¿è¡Œçš„ï¼Œæ‰€ä»¥ï¼Œfooä¸­çš„`this`ä¾ç„¶æŒ‡å‘windowå¯¹è±¡ã€‚

  > åœ¨å‡½æ•°å†…æ‰§è¡Œ

  ```
  a = 1ï¼›
  (function() {
  	console.log(this)  // window
  	console.log(this.a) // 1
  })
  function bar() {
  	b = 2  //å…¨å±€
  	(function() {
  		console.log(this)  //window
  		console.log(this.b)  // 2
  	})
  }
  bar()
  ```

  è‡ªæ‰§è¡Œå‡½æ•°åªè¦æ‰§è¡Œåˆ°å°±ä¼šè¿è¡Œï¼Œä¸”åªè¿è¡Œä¸€æ¬¡ï¼Œ`this`æŒ‡å‘windowã€‚

  #### ğŸ”— éšå¼ç»‘å®š

  éšå¼ç»‘å®šå°±æ˜¯ï¼Œå‡½æ•°çš„è°ƒç”¨æ˜¯åœ¨æŸä¸ªå¯¹è±¡ä¸Šè§¦å‘çš„ï¼Œå³è°ƒç”¨ä½ç½®å­˜åœ¨ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå¤§æ¦‚å°±æ˜¯ **XXX.func()** è¿™ç§è°ƒç”¨æ¨¡å¼ã€‚

  æ­¤æ—¶`func`çš„thisæŒ‡å‘`XXX`ï¼Œä½†å¦‚æœå­˜åœ¨é“¾å¼è°ƒç”¨ï¼Œä¾‹å¦‚XXX.YYY.ZZZ.funcï¼Œè®°ä½ä¸€ä¸ªåŸåˆ™ï¼š **thisæ°¸è¿œæŒ‡å‘æœ€åè°ƒç”¨å®ƒçš„é‚£ä¸ªå¯¹è±¡**ã€‚

  > éšå¼ç»‘å®š  

  ```
  var a = 1;
  function foo() {
  	console.log(this.a)
  }
  var obj = {a: 2, foo}
  foo()  // 1, é»˜è®¤ç»‘å®š
  obj.foo() // 2, éšå¼ç»‘å®š
  ```

  `obj`æ˜¯ç”±varå®šä¹‰çš„, å› æ­¤ä¼šæŒ‚åœ¨åˆ°window, æ‰€ä»¥obj.foo()ç›¸å½“äºwindow.obj.foo(), fooä¸­çš„thisæŒ‡å‘objçš„this.

  > å¯¹è±¡é“¾å¼è°ƒç”¨

  ```
  var obj1 = {
  	a: 1,
  	obj2: {
  		a: 2,
  		foo() {
  			console.log(this.a)
  		}
  	}
  }
  obj1.obj2.foo() // 2
  ```

  ####  ğŸ”— éšå¼ç»‘å®šä¸¢å¤±

  â€‹	éšå¼ç»‘å®šçš„ä¸¢å¤±ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š

     - ç”¨å¦ä¸€ä¸ªå˜é‡ä½œä¸ºå‡½æ•°åï¼Œä¹‹åå†ç”¨è¿™ä¸ªåˆ«åæ‰§è¡Œå‡½æ•°

     - å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ä¼šéšå¼èµ‹å€¼

       ä¸¢å¤±ä¹‹åï¼Œ`this`çš„æŒ‡å‘ä¼šå¯ç”¨é»˜è®¤ç»‘å®šã€‚

       > å–å‡½æ•°åˆ«å

       ```
       // å‡½æ•°åˆ«ååœ¨å…¨å±€
       a = 1
       var obj = {
       	a: 2,
       	foo() {
       		console.log(this.a)
       	}
       }
       var foo = obj.foo
       obj.foo()  // 2
       foo()  // 1
       ```

       `JavaScript`å¯¹äºå¼•ç”¨ç±»å‹ï¼Œå…¶åœ°å€æŒ‡é’ˆå­˜æ”¾åœ¨æ ˆå†…å­˜ä¸­ï¼ŒçœŸæ­£çš„æœ¬ä½“æ˜¯å­˜æ”¾åœ¨å †å†…å­˜ä¸­çš„ã€‚

       ä¸Šé¢å°†`obj.foo`èµ‹å€¼ç»™`foo`ï¼Œå°±æ˜¯å°†`foo`ä¹ŸæŒ‡å‘äº†`obj.foo`æ‰€æŒ‡å‘çš„å †å†…å­˜ï¼Œæ­¤åå†æ‰§è¡Œ`foo`ï¼Œç›¸å½“äºç›´æ¥æ‰§è¡Œçš„å †å†…å­˜çš„å‡½æ•°ï¼Œä¸`obj`æ— å…³ï¼Œ`foo`ä¸ºé»˜è®¤ç»‘å®šã€‚ç¬¼ç»Ÿçš„è®°ï¼Œ**åªè¦fnå‰é¢ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œè‚¯å®šä¸æ˜¯éšå¼ç»‘å®š**ã€‚

       ```
       // å‡½æ•°åˆ«ååœ¨å¯¹è±¡ä¸­
       var obj = { 
           a: 1, 
           foo() {
               console.log(this.a)
           } 
       };
       var a = 2;
       var foo = obj.foo;
       var obj2 = { a: 3, foo: obj.foo }
       
       obj.foo(); // 1
       foo(); // 2
       obj2.foo(); // 3
       ```

       `obj2.foo`æŒ‡å‘äº†`obj.foo`çš„å †å†…å­˜ï¼Œæ­¤åæ‰§è¡Œä¸`obj`æ— å…³(é™¤éä½¿ç”¨`call/apply`æ”¹å˜`this`æŒ‡å‘)

       > å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’

       ```
       function foo() {
         console.log(this.a)
       }
       function doFoo(fn) {
         console.log(this)
         fn()
       }
       var obj = { a: 1, foo }
       var a = 2
       doFoo(obj.foo)  // Window{...} 2
       ```

       `obj.foo`ä½œä¸ºå®å‚ï¼Œåœ¨é¢„ç¼–è¯‘æ—¶å°†å…¶å€¼èµ‹å€¼ç»™å½¢å‚`fn`ï¼Œæ˜¯å°†`obj.foo`æŒ‡å‘çš„åœ°å€èµ‹ç»™äº†`fn`ï¼Œæ­¤å`fn`æ‰§è¡Œä¸ä¼šä¸`obj`äº§ç”Ÿä»»ä½•å…³ç³»ã€‚`fn`ä¸ºé»˜è®¤ç»‘å®šã€‚

